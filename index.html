<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"> 
    <link id="style" rel="stylesheet" href="./src/style.css" />
  </head>
  <body>
    <div id="renkon">
      <script type="reactive">
        const llamaModule = import("./lib/llama.js");
      </script>
      <script type="reactive">
        const llama = Behaviors.keep(llamaModule);
      </script>
      <script type="reactive">
        console.log("calling test");
        console.log(enter);
        const result = llama.test(enter);
      </script>
      <script type="reactive">
        console.log("kept");
        const result2 = Behaviors.keep(result);
      </script>
      <script type="reactive">
        document.querySelector("#output").textContent = result2;
      </script>

      <script type="reactive">
        const enter = Events.observe((notify) => {
          const keyDown = (evt) => {
            if (evt.key === "Enter") {
              console.log("enter");
              notify(evt.target.textContent);
		        }
	        };
          document.querySelector("#input").addEventListener("keydown", keyDown);
          return () => {document.querySelector("#input").removeEventListener("keydown", keyDown)}
        });
      </script>
      <div id="input" style="border: 1px solid black; width:600px" contenteditable></div>
      <div style="height: 20px;"></div>
      <div id="output" style="border: 1px solid brown; width:600px; height: 60px"></div>
    </div>
    <script type="module">
      import {primerView} from "./src/main.js";
      let source = document.body.querySelector("#renkon");
      primerView(source);
    </script>
  </body>
</html>
